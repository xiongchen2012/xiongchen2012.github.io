{"componentChunkName":"component---src-templates-blog-post-js","path":"/react/react-render-context/","result":{"data":{"site":{"siteMetadata":{"title":"Deathdealer's Blog"}},"markdownRemark":{"id":"9b3e7f3d-859d-5afe-b65d-0041bbc69c81","excerpt":"åŸæ–‡åœ°å€ å½“ç»„ä»¶æ¶ˆè´¹çš„æ—¶å€™ï¼Œå¦‚æœå€¼å˜äº†ï¼Œç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“ã€‚ä½†æ˜¯ä¸‹é¢çš„ç¤ºä¾‹ä¸­ä¸ºä»€ä¹ˆ  and  ä¹Ÿé‡æ–°æ¸²æŸ“äº†ï¼Ÿ  ç»„ä»¶æ ‘çš„ç»“æ„ä¸º  Contextå’ŒRendering ç¬¬ä¸€ç¯‡Blogä¸­ï¼Œæˆ‘ä»¬äº†è§£äº†React Renderingçš„è¡Œä¸ºã€‚å½“ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼ŒReactâ€¦","html":"<blockquote>\n<p><a href=\"https://alexsidorenko.com/blog/react-render-context/\">åŸæ–‡åœ°å€</a></p>\n</blockquote>\n<p>å½“ç»„ä»¶æ¶ˆè´¹<code class=\"language-text\">Context</code>çš„æ—¶å€™ï¼Œå¦‚æœ<code class=\"language-text\">context</code>å€¼å˜äº†ï¼Œç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“ã€‚ä½†æ˜¯ä¸‹é¢çš„ç¤ºä¾‹ä¸­ä¸ºä»€ä¹ˆ <code class=\"language-text\">Component A</code> and <code class=\"language-text\">Component B</code> ä¹Ÿé‡æ–°æ¸²æŸ“äº†ï¼Ÿ</p>\n<p><video style=\"aspect-ratio: 1360/1121\" autoplay=\"\" loop=\"\" muted=\"\" playsinline=\"\" src=\"https://alexsidorenko.com/345403c36ea184fe348d0e3996725309/initial.mp4\"></video></p>\n<p>ç»„ä»¶æ ‘çš„ç»“æ„ä¸º <code class=\"language-text\">App (ContextProvider) &gt; A &gt; B &gt; C</code></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AppContext.Provider</span></span> <span class=\"token attr-name\">...</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ComponentA</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">AppContext.Provider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ComponentA</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ComponentB</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ComponentB</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ComponentC</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Contextå’ŒRendering</h3>\n<p>ç¬¬ä¸€ç¯‡Blogä¸­ï¼Œæˆ‘ä»¬äº†è§£äº†React Renderingçš„è¡Œä¸ºã€‚å½“ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼ŒReactä¼šé€’å½’çš„é‡æ–°æ¸²æŸ“å®ƒçš„å­ç»„ä»¶ï¼Œ å¹¶ä¸”ä¼šæ— è§†å®ƒä»¬çš„<code class=\"language-text\">props</code>å’Œ<code class=\"language-text\">context</code>ã€‚å¦‚æœæŠŠä¸Šé¢ç¤ºä¾‹ä¸­çš„<code class=\"language-text\">context</code>ç§»é™¤æ‰ä¼šå‘ä»€ä¹ˆï¼Œè¯·çœ‹ä¸‹é¢ç¤ºä¾‹ï¼š</p>\n<p><video style=\"aspect-ratio: 1360/895\" autoplay=\"\" loop=\"\" muted=\"\" playsinline=\"\" src=\"https://alexsidorenko.com/d9096d3e51b8bf32d6ba597e91c2793e/no-context.mp4\"></video></p>\n<p>ä¸ºäº†é˜²æ­¢é€’å½’çš„é‡æ–°æ¸²æŸ“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class=\"language-text\">memo</code>ï¼Œæˆ‘ä»¬ç»™ä¸€å¼€å§‹çš„ç¤ºä¾‹å†åŠ ä¸Š <code class=\"language-text\">memo</code> </p>\n<p><video style=\"aspect-ratio: 1360/1127\" autoplay=\"\" loop=\"\" muted=\"\" playsinline=\"\" src=\"https://alexsidorenko.com/3347fc58a2f5a947c6cf4bba84244a4f/memo.mp4\"></video></p>\n<p>æ‰€ä»¥ ğŸ‘‡</p>\n<img src=\"https://obs-1d2f.oss-cn-hangzhou.aliyuncs.com/images/image-20210824142052905.png\" alt=\"image-20210824142052905\" style=\"zoom:40%;\">\n<h3>Context å’Œå¼•ç”¨</h3>\n<p>å®é™…åº”ç”¨ä¸­ï¼Œä¼šç»å¸¸é€šè¿‡<code class=\"language-text\">context</code>ä¼ é€’æ›´å¤šçš„æ•°æ®ã€‚æœ‰æ—¶å€™æ•°æ®ä¼šä¾èµ–æŸäº›<code class=\"language-text\">state</code>çš„å˜é‡</p>\n<p><video style=\"aspect-ratio: 1360/1195\" autoplay=\"\" loop=\"\" muted=\"\" playsinline=\"\" src=\"https://alexsidorenko.com/9e4b54f5eb5785ecff6c8bfd344f3439/text.mp4\"></video></p>\n<p>æˆ‘ä»¬åªæŠŠ <code class=\"language-text\">a</code> å’Œ <code class=\"language-text\">b</code>ä¼ é€’ç»™äº†<code class=\"language-text\">Provider</code>ï¼Œä½†å½“<code class=\"language-text\">count</code>æ›´æ–°æ—¶ï¼Œæ¶ˆè´¹çš„ç»„ä»¶ä¹Ÿé‡æ–°æ¸²æŸ“äº†ã€‚å¦‚ä½•é˜²æ­¢å‡ºç°è¿™ç§æƒ…å†µï¼Ÿ</p>\n<p>æç¤ºï¼š <code class=\"language-text\">text</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæ˜¯éåŸå§‹ç±»å‹ï¼ˆnon-primitiveï¼‰</p>\n<blockquote>\n<p>æ‰€æœ‰çš„<code class=\"language-text\">Consumer</code>éƒ½æ˜¯<code class=\"language-text\">Provider</code>çš„å­å­™èŠ‚ç‚¹ï¼Œå½“<code class=\"language-text\">Provider</code>çš„<code class=\"language-text\">value</code>å˜åŒ–æ—¶ï¼Œä¼šé‡æ–°æ¸²æŸ“</p>\n<p><a href=\"https://reactjs.org/docs/context.html#contextprovider\">React Docs - Context Provider</a></p>\n</blockquote>\n<p>å½“ <code class=\"language-text\">count</code> çš„å€¼æ›´æ–°æ—¶ï¼Œ<code class=\"language-text\">App</code>ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå¯¼è‡´ <code class=\"language-text\">text</code> å˜é‡é‡æ–°å£°æ˜å’Œèµ‹å€¼ï¼ˆå˜æˆä¸€ä¸ªæ–°çš„å˜é‡ï¼‰ã€‚æˆ‘ä»¬ç°åœ¨å·²ç»çŸ¥é“äº†åŸå§‹ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„åŒºåˆ«ã€‚ <code class=\"language-text\">{a: &quot;lorem&quot;, b: &quot;ipsum&quot;} !== {a: &quot;lorem&quot;, b: &quot;ipsum&quot;}</code>æ„å‘³ç€æ¯ä¸€æ¬¡Appé‡æ–°æ¸²æŸ“æ—¶ï¼Œå³ä½¿<code class=\"language-text\">a</code>å’Œ<code class=\"language-text\">b</code>çš„å€¼æ²¡æœ‰å˜ï¼Œ<code class=\"language-text\">context</code>çš„å€¼ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚å› æ­¤<code class=\"language-text\">consumer</code>ä¹Ÿé‡æ–°æ¸²æŸ“äº†ã€‚ä¸ºäº†é˜²æ­¢å‡ºç°è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯ <code class=\"language-text\">text</code> å˜é‡ä¸€ç›´ç»´æŒç›¸åŒå¯¹è±¡çš„å¼•ç”¨ã€‚ä¹‹å‰çš„Blogä¸­æœ‰ä»‹ç»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code class=\"language-text\">useMemo</code>ï¼Œæ‰€ä¸‹æ‰€ç¤ºï¼š</p>\n<p><video style=\"aspect-ratio: 1360/1195\" autoplay=\"\" loop=\"\" muted=\"\" playsinline=\"\" src=\"https://alexsidorenko.com/732fa2873e4805de5f45ae3e1dde6dca/usememo.mp4\"></video></p>\n<p>ç°åœ¨ <code class=\"language-text\">text</code> å˜é‡åªæœ‰åœ¨ <code class=\"language-text\">useMemo</code> ä¾èµ–åˆ—è¡¨ï¼ˆaå’Œbï¼‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°å®šä¹‰å¹¶èµ‹å€¼ã€‚ <code class=\"language-text\">count</code> ä¸åœ¨ä¾èµ–åˆ—è¡¨ä¸­ï¼Œæ‰€ä»¥å³ä½¿<code class=\"language-text\">count</code> å˜äº†ï¼Œ <code class=\"language-text\">text</code> ä¹Ÿä¸ä¼šå‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œ<code class=\"language-text\">consumer</code>ä¹Ÿä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚</p>","frontmatter":{"title":"React Renderingæ•™ç¨‹ï¼ˆ5ï¼‰ - Context","date":"2021/08/24 15:06:41","description":"å½“ Provider çš„ value å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒå†…éƒ¨çš„æ‰€æœ‰æ¶ˆè´¹ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚"}},"previous":{"fields":{"slug":"/react/react-render-usecallback/"},"frontmatter":{"title":"React Renderingæ•™ç¨‹ï¼ˆ4ï¼‰ - useCallback"}},"next":{"fields":{"slug":"/react/batched-update/"},"frontmatter":{"title":"å¦‚ä½•è·å–æ­£ç¡®çš„setStateä¹‹åçš„å€¼"}}},"pageContext":{"id":"9b3e7f3d-859d-5afe-b65d-0041bbc69c81","previousPostId":"24ac4511-3c67-5132-9b5f-fce15007bd48","nextPostId":"f41ac525-4945-50ec-896c-e2668bc386c0"}},"staticQueryHashes":["2355076697","2841359383"]}