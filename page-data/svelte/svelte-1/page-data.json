{"componentChunkName":"component---src-templates-blog-post-js","path":"/svelte/svelte-1/","result":{"data":{"site":{"siteMetadata":{"title":"Deathdealer's Blog"}},"markdownRemark":{"id":"e4e4749f-02cd-57fa-8b10-69177357cd9f","excerpt":"Svelte是什么 首先它又是一个做Web开发的轮子，在State Of JS 2020调查中Svelte获得前端工程师的一致好评，是2020年满意度第1的前端框架。 Svelte is a radical new approach to building user interfaces. Whereas…","html":"<h4>Svelte是什么</h4>\n<p>首先它又是一个做Web开发的轮子，在<a href=\"https://2020.stateofjs.com/zh-Hans/technologies/front-end-frameworks\">State Of JS 2020</a>调查中Svelte获得前端工程师的一致好评，是2020年满意度第1的前端框架。</p>\n<blockquote>\n<p>Svelte is a radical new approach to building user interfaces. Whereas traditional frameworks like React and Vue do the bulk of their work in the <em>browser</em>, Svelte shifts that work into a <em>compile step</em> that happens when you build your app.</p>\n</blockquote>\n<p>和react/vue/angular这些框架不一样的地方在于：会在编译阶段会把自己（svelte runtime）和业务代码打包到一起。因为最终会打包成Vallina JS，所以没有Virtual DOM的开销，运行速度很快，打包出来的产物尺寸也很小。</p>\n<p>作者Rich Harris在《Rethinking reactivity》中把Virtual DOM一通怼，认为Virtual DOM是纯开销没有半点是处。<a href=\"https://youtu.be/AdNJ3fydeao\">Youtube视频</a></p>\n<h4>快速认识Svelte</h4>\n<h5>Svelte组件</h5>\n<p>和vue类似，svelte组件也是把HTML/CSS/JS写在一个扩展名为<code class=\"language-text\">.svelte</code>的文件中，VSCode中需按装一个插件（<a href=\"https://marketplace.visualstudio.com/items?itemName=svelte.svelte-vscode\">Svelte for VSCode</a>）才能对<code class=\"language-text\">.svelte</code>文件进行语法高亮和语法提示等。</p>\n<p>组件的结构一般如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- Svelte组件结构(.svelte) --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token comment\">// logic goes here</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- CSS --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token comment\">/* styles go here */</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- template (zero or more items) goes here --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>....<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h5>变量</h5>\n<p>script中定义的变量，在html中用<code class=\"language-text\">{}</code>来引用，既可以在text中引用，也可以在属性中引用（比如img的src属性）</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n\t<span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'world'</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>Hello {name.toUpperCase()}!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>如果用在HTML上的变量名和属性名一样，可以用简写形式</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n\t<span class=\"token keyword\">let</span> src <span class=\"token operator\">=</span> <span class=\"token string\">'http://www.xx.com/assets/xxx.png'</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- 简写形式 --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">{src}</span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>some text<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>默认情况下<code class=\"language-text\">script</code>标签下定义的字符串都是字面上的字符串，会在render是原样显示出来，如果想渲染没有转义过的字符串（比如一段html文本）可以在模版中用<code class=\"language-text\">@html</code>标注出来</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n\t<span class=\"token keyword\">let</span> string <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">this string contains some &lt;strong>HTML!!!&lt;/strong></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>{@html string}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h5>样式</h5>\n<p>直接用<code class=\"language-text\">&lt;style&gt;</code>标签可以给组件定义样式，但是组件内定义的<code class=\"language-text\">style</code>只在本组件内生效，不会影响其它组件。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token selector\">p</span> <span class=\"token punctuation\">{</span><span class=\"token property\">font-sie</span><span class=\"token punctuation\">:</span> 18px<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>hello world<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>只会影响本组件内的<code class=\"language-text\">p</code>标签，也就是hello world会受影响</p>\n<h5>引用其它组件</h5>\n<p>一个svelte文件写完整个APP的情况正常人都干不出来这样的事，通常都会拆开来写组件，不同的组件负责不同的功能与业务。引入其它组件只需要在<code class=\"language-text\">script</code>区域里<code class=\"language-text\">import</code>即可。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> OtherComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'./OtherComponent.svelte'</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>OtherComponent</span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>约定：用户自定义组件用大驼峰来表示，用来和html原生标签区分。</p>\n<h5>解析Svelte文件</h5>\n<p>svelte文件的结构与vue相当类似，也没办法直接被打包出来，所以需要用一些插件或者webpack loader才行。以下两个是官方维护的插件，比较交靠谱。</p>\n<p>Webpack：<a href=\"https://github.com/sveltejs/svelte-loader\">svelte-loader</a></p>\n<p>Rollup：<a href=\"https://github.com/sveltejs/rollup-plugin-svelte\">rollup-plugin-svelte</a></p>","frontmatter":{"title":"Svelte学习笔记（1）","date":"2021/04/18 21:25:32","description":"自学Svelte时的学习笔记第1篇，方便自己以后快速复习"}},"previous":{"fields":{"slug":"/intro-valtio/"},"frontmatter":{"title":"valtio简介"}},"next":{"fields":{"slug":"/svelte/svelte-2/"},"frontmatter":{"title":"Svelte学习笔记（2）"}}},"pageContext":{"id":"e4e4749f-02cd-57fa-8b10-69177357cd9f","previousPostId":"ffb55ee7-03aa-5714-a330-511d1f8d63ea","nextPostId":"6b68cdce-65bd-51f0-a883-0d3ee5e46820"}},"staticQueryHashes":["2355076697","2841359383"]}