{"componentChunkName":"component---src-templates-blog-post-js","path":"/svelte/svelte-2/","result":{"data":{"site":{"siteMetadata":{"title":"Deathdealer's Blog"}},"markdownRemark":{"id":"6b68cdce-65bd-51f0-a883-0d3ee5e46820","excerpt":"响应式系统 Svelte’s reactivity is based on assignments Svelte的响应式系统是基于赋值的，只要给声明的变量、对象、数组重新赋值，就可以触发re-render 事件绑定 用前缀绑定事件处理函数，如下代码所示： 响应式声明（reactive declarations…","html":"<h4>响应式系统</h4>\n<blockquote>\n<p>Svelte’s reactivity is based on assignments</p>\n<p>Svelte的响应式系统是基于赋值的，只要给声明的变量、对象、数组重新赋值，就可以触发re-render</p>\n</blockquote>\n<ul>\n<li>\n<p>事件绑定</p>\n<p>用<code class=\"language-text\">on:</code>前缀绑定事件处理函数，如下代码所示：</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{handleClick}</span><span class=\"token punctuation\">></span></span>\nClick\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span></code></pre></div>\n</li>\n<li>\n<p>响应式声明（reactive declarations）</p>\n<p>用<code class=\"language-text\">$:</code>前缀声明<strong>响应式变量</strong>，如下代码所示：</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n$<span class=\"token operator\">:</span> doubled <span class=\"token operator\">=</span> count <span class=\"token operator\">*</span> <span class=\"token number\">2</span>  \n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>响应式变量可以不用声明，因为svelte会自动加上<code class=\"language-text\">let</code>，如上面例子中的<code class=\"language-text\">doubled</code>可以不用声明直接使用</p>\n<p>除了声明响应式变量之外，还可以<strong>运行任意语句</strong>。语句中的变量值变了，就会自动运行这些语句，如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">$<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">the count is </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 只要count值变了，就会在控制台打印日志</span>\n<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">I SAID THE COUNT IS </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>甚至还可以用在<code class=\"language-text\">if</code>语句前面</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">$: if (count >= 10) {\nalert(`count is dangerously high!`);\n\tcount = 9;\n}</code></pre></div>\n<p>数组和对象的变化不能用<code class=\"language-text\">$:</code>来实现。</p>\n</li>\n</ul>\n<p><strong>参考</strong></p>\n<p><code class=\"language-text\">$:</code>是javascript label语法，<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/label\">MDN</a></p>","frontmatter":{"title":"Svelte学习笔记（2）","date":"2021/04/18 21:33:32","description":"自学Svelte时的学习笔记第2篇，方便自己以后快速复习"}},"previous":{"fields":{"slug":"/svelte/svelte-1/"},"frontmatter":{"title":"Svelte学习笔记（1）"}},"next":{"fields":{"slug":"/svelte/svelte-3/"},"frontmatter":{"title":"Svelte学习笔记（3）"}}},"pageContext":{"id":"6b68cdce-65bd-51f0-a883-0d3ee5e46820","previousPostId":"e4e4749f-02cd-57fa-8b10-69177357cd9f","nextPostId":"98bfced2-3352-506a-9c8f-1aed30fb5f50"}},"staticQueryHashes":["2355076697","2841359383"]}